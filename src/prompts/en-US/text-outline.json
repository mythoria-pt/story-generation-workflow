{
  "systemPrompt": "You are an award-winning children's book author and story structure expert. You specialize in creating engaging, age-appropriate narratives that captivate readers and provide meaningful experiences. You must respond with valid JSON only, following the exact structure specified in the user prompt.",
  "userPrompt": "# CONTEXT #\nYou are helping to create a personalized story outline for a reader. This is part of a larger story generation workflow where the outline will be used to generate individual chapters.\n\n# OBJECTIVE #\nCreate a detailed, well-structured book outline that includes:\n- A compelling book title and synopsis\n- Chapter-by-chapter breakdown with engaging titles and synopses\n- Detailed illustration prompts for covers and chapters\n- Content appropriate for the specified target audience\n\n# STYLE #\nWrite in the \"{{novelStyle}}\" style, ensuring the narrative voice and content match this genre. The story should feel authentic to the {{novelStyle}} genre while remaining engaging and accessible.\n\n# TONE #\nAdapt your tone to be appropriate for {{targetAudience}}. The language, themes, and complexity should match the developmental stage and interests of this audience.\n\n# AUDIENCE #\nThis story is specifically designed for {{targetAudience}}. Consider their:\n- Reading comprehension level\n- Emotional maturity\n- Interests and concerns typical for this age group\n- Attention span and chapter length preferences\n\n# CRITICAL INSTRUCTION FOR IMAGE PROMPTS #\n**NEVER use character names in illustration prompts.** Instead, always use:\n- Character type (e.g., \"boy\", \"girl\", \"young woman\", \"elderly man\")\n- Physical description from the character information\n- Age-appropriate descriptors\n\n**Example:**\n❌ BAD: \"Generate an image of John playing football\"\n✅ GOOD: \"Generate an image of a boy with blue eyes and short brown hair playing football\"\n\nFor each character reference in image prompts, use their physical description and character type instead of their name.\n\n# RESPONSE FORMAT #\nRespond with ONLY valid JSON following this exact structure:\n\n## STORY SPECIFICATIONS ##\n**Language:** Write ALL content in {{language}} (this is the user's selected language)\n**Genre:** {{novelStyle}}\n**Target Audience:** {{targetAudience}}\n**Chapters:** Exactly {{chapterCount}} chapters\n**Setting:** {{place}}\n**Illustration Style:** {{graphicalStyle}}\n\n## CHARACTERS ##\n{{characters}}\n\n## STORY FOUNDATION ##\n**Title:** \"{{bookTitle}}\"\n**Story Context:** {{storyDescription}}\n**Plot Description:**\n{{description}}\n\n## ILLUSTRATION REQUIREMENTS ##\n- Book cover: A5-vertical hardcover format\n- Back cover: A4-vertical hardcover format (can continue front cover theme)\n- Chapter illustrations: Detailed scene descriptions for each chapter\n- Style: Use {{graphicalStyle}} aesthetic throughout\n- **IMPORTANT:** Use character types and physical descriptions, NOT character names\n\n## JSON OUTPUT STRUCTURE ##\n{\n  \"bookTitle\": \"[The exact book title]\",\n  \"bookCoverPrompt\": \"[Detailed {{graphicalStyle}} illustration prompt for A5-vertical hardcover front cover - use character types and physical descriptions, not names]\",\n  \"bookBackCoverPrompt\": \"[Detailed {{graphicalStyle}} illustration prompt for A4-vertical hardcover back cover - use character types and physical descriptions, not names]\",\n  \"synopses\": \"[Comprehensive synopsis of the entire book written in {{language}}]\",\n  \"chapters\": [\n    {\n      \"chapterNumber\": [chapter number as integer],\n      \"chapterTitle\": \"[Engaging chapter title in {{language}}]\",\n      \"chapterSynopses\": \"[Detailed synopsis of what happens in this chapter, written in {{language}}]\",\n      \"chapterPhotoPrompt\": \"[Detailed {{graphicalStyle}} illustration prompt for this chapter's scene - use character types and physical descriptions, not names]\"\n    }\n  ]\n}\n\n## QUALITY REQUIREMENTS ##\n- Ensure narrative cohesion across all chapters\n- Each chapter should advance the plot meaningfully\n- Chapter titles should be engaging and age-appropriate\n- Synopses should be detailed enough to guide chapter writing\n- Illustration prompts should be specific and vivid\n- **CRITICAL:** All illustration prompts must use character types and physical descriptions instead of character names\n- All content must be in {{language}}\n- Maintain consistency with {{novelStyle}} genre conventions\n- Respect {{targetAudience}} developmental appropriateness\n\n## IMAGE PROMPT EXAMPLES ##\n**Character Information:** {\"name\": \"Maria\", \"type\": \"girl\", \"physicalDescription\": \"a young girl with curly black hair, brown eyes, and a bright smile\"}\n\n❌ Wrong: \"Maria running through the forest\"\n✅ Correct: \"A young girl with curly black hair, brown eyes, and a bright smile running through the forest\"\n\n**Multiple Characters:**\n❌ Wrong: \"John and Sarah playing together\"\n✅ Correct: \"A boy with blue eyes and short brown hair playing with a girl with long blonde hair and green eyes\"\n\nGenerate the complete story outline now following this structure exactly.",
  "outputFormat": "json",
  "templateVariables": {
    "novelStyle": "Story genre/style from database (e.g., 'fantasy', 'adventure')",
    "targetAudience": "Target audience from database (e.g., 'children_7-10')",
    "place": "Story setting/location from database",
    "language": "Language name derived from storyLanguage code",
    "chapterCount": "Number of chapters to generate",
    "characters": "JSON formatted character information (without IDs)",
    "bookTitle": "Story title from database",
    "storyDescription": "Brief story description",
    "description": "User's plot description from database",
    "graphicalStyle": "Visual/illustration style from database"
  }
}
